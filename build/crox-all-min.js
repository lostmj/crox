/*
 Crox v1.2.7
 https://github.com/thx/crox

 Released under the MIT license
 md5: 24f375d4f1884b20a6eda7434bb1aa48
*/
(function(D){var B=function(){function B(a,f){this.row=a;this.col=f}function G(a,f){var d=a.substring(0,f),c=d.match(/\r\n?|\n/g),g=1;c&&(g+=c.length);d=1+/[^\r\n]*$/.exec(d)[0].length;return new B(g,d)}function D(a){return'"'+a.replace(/[\x00-\x1f"\\\u2028\u2029]/g,function(f){switch(f){case '"':return'\\"';case "\\":return"\\\\";case "\b":return"\\b";case "\f":return"\\f";case "\n":return"\\n";case "\r":return"\\r";case "\t":return"\\t"}return"\\u"+("000"+f.charCodeAt(0).toString(16)).slice(-4)})+
'"'}function H(a){return eval(a)}function t(a){return a.replace(/^_+/,"$&$&")}function K(a){function f(b,e,g,k){this.tag=b;this.text=e;this.index=g;this.subMatches=k}function d(){}function c(b){for(var e=1,g=[],k=[1],f=[],a=0;a<b.length;++a)k.push(e+=RegExp("|"+b[a][0].source).exec("").length),f.push(b[a][1]||d),g.push("("+b[a][0].source+")");return[RegExp(g.join("|")+"|","g"),k,f]}f.prototype.toString=function(){return this.text};var g=a.$||"$",b={},k;for(k in a)"$"!=k.charAt(0)&&(b[k]=c(a[k]));
return function(k){var e=k.length,a=0,c=[""],d={text:"",index:0,source:k,pushState:function(b){c.push(b)},popState:function(){c.pop()},retract:function(b){a-=b}};return{scan:function(){do{var l;a:{var r=b[c[c.length-1]],p=r[0];p.lastIndex=a;l=p.exec(k);if(""==l[0]){if(a<e)throw Error("lexer error: "+G(k,a)+"\n"+k.slice(a,a+50));l=new f(g,"",a)}else{d.index=a;a=p.lastIndex;for(var p=r[1],q=0;q<p.length;++q)if(l[p[q]]){r=r[2][q].apply(d,l.slice(p[q],p[q+1]));l=new f(r,l[0],d.index,l.slice(p[q]+1,p[q+
1]));break a}l=void 0}}}while(null==l.tag);return l},getPos:function(b){return G(k,b)}}}}function x(a){var f;a:{switch(a){case "id":case "lit":f=!0;break a}f=!1}return f||"."==a||"[]"==a}function m(a){return x(a)||"!"==a||"u-"==a}function y(a){if(m(a))return!0;switch(a){case "*":case "/":case "%":return!0}return!1}function z(a){if(y(a))return!0;switch(a){case "+":case "-":return!0}return!1}function A(a){if(z(a))return!0;switch(a){case "<":case ">":case "<=":case ">=":return!0}return!1}function C(a){if(A(a))return!0;
switch(a){case "eq":case "ne":return!0}return!1}function E(a){return C(a)||"&&"==a}function I(a){return E(a)||"||"==a}function L(a,f,d){function c(b){e+=b}function g(b){for(var e=0;e<b.length;++e){var a=b[e];switch(a[0]){case "if":c("if("+k(a[1])+"){");g(a[2]);c("}");a[3]&&(c("else{"),g(a[3]),c("}"));break;case "each":var l=a[3]?t(a[3]):"_"+s++,r=k(a[1]);if(/^\w+$/.test(r))var p=r;else p="_"+s++,c("var "+p+" = "+r+";");a[5]?c("for(var "+l+"=0;"+l+"<"+p+".length;"+l+"++){"):c("for(var "+l+" in "+p+
") {");c("var "+a[4]+" = "+p+"["+l+"];");g(a[2]);c("}");break;case "set":c("var "+t(a[1])+"="+k(a[2])+";");break;case "eval":l=k(a[1]);/^\w+$/.test(l)?r=l:(r="_t",c("_t = "+l+";"));c("if("+r+" !=null)_s += "+((d?!a[2]:a[2])?f+"("+r+")":r)+";");break;case "text":c("_s += "+D(a[1])+";");break;case "inc":break;default:throw Error("unknown stmt: "+a[0]);}}}function b(b,a){var e=k(b);a&&!a(b[0])&&(e="("+e+")");return e}function k(a){switch(a[0]){case "id":return t(a[1]);case "lit":return"string"==typeof a[1]?
D(a[1]):String(a[1]);case ".":return b(a[1],x)+"."+a[2];case "[]":return b(a[1],x)+"["+k(a[2])+"]";case "!":return"!"+b(a[1],m);case "u-":return"- "+b(a[1],m);case "*":case "/":case "%":return b(a[1],y)+a[0]+b(a[2],m);case "+":case "-":return b(a[1],z)+a[0]+" "+b(a[2],y);case "<":case ">":case "<=":case ">=":return b(a[1],A)+a[0]+b(a[2],z);case "==":case "!=":case "===":case "!==":return b(a[1],C)+a[0]+b(a[2],A);case "&&":return b(a[1],E)+"&&"+b(a[2],C);case "||":return b(a[1],I)+"||"+b(a[2],E);default:throw Error("unknown expr: "+
a[0]);}}var s=0,e="";g(a[1]);return e}function F(a){return M(N(a))}function J(a,f){var d=F(a),c;f&&(c=f.htmlEncode);a=L(d,c||"_htmlEncode",!0);d="";c||(d="var _obj = { '<': '&lt;', '>': '&gt;', '&': '&amp;', '\"': '&quot;' };\tfunction _htmlEncode(s) {\t\treturn String(s).replace(/[<>&\"]/g, function(c) {\t\t\treturn _obj[c];\t\t});\t}");return Function("root",d+("var _t,_s = '';"+a+"return _s;"))}function O(a,f){function d(a){for(var c=0;c<a.length;++c){var e=a[c];switch(e[0]){case "if":var u="if("+
g(e[1])+"){";b+=u;d(e[2]);b+="}";e[3]&&(b+="else{",d(e[3]),b+="}");break;case "each":u="foreach("+g(e[1])+" as "+(e[3]?"$crox_"+t(e[3])+"=>":"")+("$crox_"+t(e[4]))+")";b+=u;b+="{";d(e[2]);b+="}";break;case "set":e="$crox_"+t(e[1])+" = "+g(e[2])+";";b+=e;break;case "eval":u=g(e[1]);b+="crox_echo("+u+", "+(f?!e[2]:e[2])+");";break;case "text":u=e[1];/<\?(?:php)?|\?>/.test(u)?(e="echo "+("'"+String(e[1]).replace(/['\\]/g,"\\$&")+"'")+";",b+=e):b+="?>"+u+"<?php ";break;case "inc":e="include '"+e[1].replace(/\.\w+$/,
".php")+"';";b+=e;break;default:throw Error("unknown stmt: "+e[0]);}}}function c(a,b){var e=g(a);b&&!b(a[0])&&(e="("+e+")");return e}function g(a){switch(a[0]){case "id":return"$crox_"+t(a[1]);case "lit":return"string"==typeof a[1]?"'"+String(a[1]).replace(/['\\]/g,"\\$&")+"'":String(a[1]);case ".":return c(a[1],x)+"->"+a[2];case "[]":return c(a[1],x)+"["+g(a[2])+"]";case "!":return"!crox_ToBoolean("+c(a[1],m)+")";case "u-":return"- "+c(a[1],m);case "*":case "/":case "%":return c(a[1],y)+a[0]+c(a[2],
m);case "+":return"crox_plus("+c(a[1],null)+", "+c(a[2],null)+")";case "-":return c(a[1],z)+"- "+c(a[2],y);case "<":case ">":case "<=":case ">=":return c(a[1],A)+a[0]+c(a[2],z);case "==":case "!=":case "===":case "!==":return c(a[1],C)+a[0]+c(a[2],A);case "&&":return"crox_logical_and("+c(a[1],null)+", "+c(a[2],null)+")";case "||":return"crox_logical_or("+c(a[1],null)+", "+c(a[2],null)+")";default:throw Error("unknown expr: "+a[0]);}}var b="";d(a[1]);b="?>"==b.slice(0,2)?b.slice(2):"<?php "+b;return b=
"<?php "==b.slice(-6)?b.slice(0,-6):b+"?>"}function P(a){function f(a){return"$crox_"+t(a)}function d(a){s+=a}function c(a){for(var g=0;g<a.length;++g){var h=a[g];switch(h[0]){case "if":d("#if("+b(h[1])+")");c(h[2]);h[3]&&(d("#{else}"),c(h[3]));d("#{end}");break;case "each":++k;var s=b(h[1]);if(/^$\w+$/.test(s))var l=s;else l="$list"+(1==k?"":k),d("#set ("+l+" = "+s+")");h[5]?(d("#foreach("+f(h[4])+" in "+l+")"),h[3]&&d("#set("+f(h[3])+" = $velocityCount - 1)")):h[3]?(d("#foreach("+f(h[3])+" in "+
l+".keySet())"),d("#set("+f(h[4])+" ="+l+".get("+f(h[3])+"))")):d("#foreach("+f(h[4])+" in "+l+")");c(h[2]);d("#{end}");--k;break;case "set":d("#set ("+f(h[1])+"="+b(h[2])+")");break;case "eval":h=b(h[1]);/^$\w+$/.test(h)?d("$!{"+h.slice(1)+"}"):d("#set($t = "+h+")$!{t}");break;case "text":d(h[1].replace(/\$/g,"$${dollar}").replace(/#/g,"$${sharp}"));break;case "inc":d("#parse('"+h[1].replace(/\.\w+$/,".vm")+"')");break;default:throw Error("unknown stmt: "+h[0]);}}}function g(a,g){var f=b(a);g&&!g(a[0])&&
(f="("+f+")");return f}function b(a){switch(a[0]){case "id":return f(a[1]);case "lit":return"string"==typeof a[1]?(a=a[1],a=-1==a.indexOf("'")?"'"+a+"'":"('"+a.split("'").join("'+\"'\"+'")+"')",a):String(a[1]);case ".":return g(a[1],x)+"."+a[2];case "[]":return g(a[1],x)+"["+b(a[2])+"]";case "!":return"!"+g(a[1],m);case "u-":if("u-"==a[1][0])throw Error("\u7981\u6b62\u4e24\u4e2a\u8d1f\u53f7\u8fde\u7528");return"-"+g(a[1],m);case "*":case "/":case "%":return g(a[1],y)+a[0]+g(a[2],m);case "+":case "-":return g(a[1],
z)+a[0]+" "+g(a[2],y);case "<":case ">":case "<=":case ">=":return g(a[1],A)+a[0]+g(a[2],z);case "==":case "!=":case "===":case "!==":return g(a[1],C)+a[0].slice(0,2)+g(a[2],A);case "&&":return g(a[1],E)+"&&"+g(a[2],C);case "||":return g(a[1],I)+"||"+g(a[2],E);default:throw Error("unknown expr: "+a[0]);}}var k=0,s="#set($dollar='$')#set($sharp='#')";c(a[1]);return s}B.prototype.toString=function(){return"("+this.row+","+this.col+")"};var N=function(){var a=[[/\s+/],[/[A-Za-z_]\w*/,function(a){switch(a){case "true":case "false":return"boolean";
case "set":case "include":return a;default:if(-1!=" abstract boolean break byte case catch char class const continue debugger default delete do double else enum export extends final finally float for function goto if implements import in instanceof int interface let long native new package private protected public return short static super switch synchronized this throw throws transient try typeof var void volatile while with yield ".indexOf(" "+a+" ")||"null"==a)throw Error("Reserved: "+a+" "+G(this.source,
this.index));return"realId"}}],[/"(?:[^"\\]|\\[\s\S])*"|'(?:[^'\\]|\\[\s\S])*'/,function(a){return"string"}],[/\d+(?:\.\d+)?(?:e-?\d+)?/,function(a){return"number"}],[function(a){a.sort().reverse();for(var d=0;d<a.length;++d)a[d]=a[d].replace(/[()*+?.[\]|]/g,"\\$&");return RegExp(a.join("|"))}("! % && ( ) * + - . / < <= = > >= [ ] || === !== == !=".split(" ")),function(a){return/[*/%]/.test(a)?"mul":/[<>]/.test(a)?"rel":/[!=]=/.test(a)?"eq":a}]];return K({"":[[/(?:(?!{{)[\s\S])+/,function(a){return"text"}],
[/{{{/,function(a){this.pushState(a);return a}],[/{{(?:\/if|else|\/each|\/forin|\/raw)}}/,function(a){return a}],[/{{#raw}}/,function(a){this.pushState("raw");return a}],[/{{(?:#(?:if|each|forin)(?=\s))?/,function(a){this.pushState("{{");return a}]],raw:[[/(?:(?!{{\/raw}})[\s\S])+/,function(a){this.popState();return"rawtext"}]],"{{":a.concat([[/}}/,function(a){this.popState();return a}]]),"{{{":a.concat([[/}}}/,function(a){this.popState();return a}]])})}(),M=function(){return function(a){function f(a,
b){return k[a][b]}for(var d=a.nStart,c=a.tSymbols,g={},b=0;b<c.length;++b)g[c[b]]=b;var k=a.tAction,s=a.tGoto,e=a.tRules,u=a.tFuncs,h=a.actionIndex;h&&(f=function(a,b){var g=k[h[a]];return g[b]||g._});return function(a,b){function k(b){throw Error("Syntax error: "+a.getPos(m.index)+(b?"\n"+b:""));}var h=0,q=[0],m=a.scan(),v=[],t={get:function(a){return v[v.length+a]},set:function(a,b){v[v.length+a]=b}};if(b)for(var n in b)t[n]=b[n];for(;;)if(n=f(h,g[m.tag]))if(0<n)q.push(h=n),v.push(m),m=a.scan();
else if(0>n&&-32768<n){n=-n;var h=e[n],w=h.length-1;q.length-=w;h=s[q[q.length-1]][h[0]-d];q.push(h);u[n]?(n=u[n].apply(t,v.splice(v.length-w,w)),v.push(n)):1!=w&&v.splice(v.length-w,w,null)}else return m.tag!=c[0]&&k(),v[0];else{n=[];for(w=0;w<d;++w)f(h,w)&&n.push(c[w]);k("find "+m.tag+"\nexpect "+n.join(" "))}}}({nStart:36,tSymbols:"$ ! && ( ) + - . = [ ] boolean eq include mul number rawtext realId rel set string text {{ {{#each {{#forin {{#if {{#raw}} {{/each}} {{/forin}} {{/if}} {{/raw}} {{else}} {{{ || }} }}} AdditiveExpression EqualityExpression LogicalAndExpression LogicalOrExpression MemberExpression MultiplicativeExpression PrimaryExpression RelationalExpression UnaryExpression _text epsilon expr id name program statement statements texts".split(" "),
tAction:[{_:-2},{_:-32768},{21:3,22:4,23:5,24:6,25:7,26:8,32:9,_:-1},{_:-19},{1:13,3:14,6:15,11:16,13:17,15:18,17:19,19:20,20:21,_:0},{1:13,3:14,6:15,11:16,13:33,15:18,17:19,19:34,20:21,_:0},{16:38,_:0},{_:-17},{_:-3},{21:3,26:8,_:-13},{_:-26},{20:44,_:-23},{_:-25},{_:-21},{13:33,17:19,19:34,_:-22},{_:-24},{5:46,6:47,_:-40},{12:48,_:-44},{2:49,_:-46},{33:50,_:-48},{7:51,9:52,_:-32},{14:53,_:-37},{_:-29},{18:54,_:-42},{_:-35},{34:55,_:0},{_:-27},{_:-23},{_:-22},{13:33,17:19,19:34,20:56,_:0},{34:60,
_:0},{30:61,_:0},{35:62,_:0},{_:-18},{_:-33},{4:63,_:0},{_:-34},{34:64,_:0},{8:65,_:0},{13:33,17:19,19:34,_:0},{_:-11},{_:-15},{_:-16},{13:33,17:19,19:34,20:56,_:-49},{_:-20},{_:-12},{_:-28},{_:-14},{14:53,_:-38},{14:53,_:-39},{18:54,_:-43},{12:48,_:-45},{2:49,_:-47},{_:-30},{10:81,_:0},{_:-36},{5:46,6:47,_:-41},{34:82,_:0},{34:83,_:0},{34:84,_:0},{34:85,_:0},{21:3,22:4,23:5,24:6,25:7,26:8,29:86,31:87,32:9,_:0},{34:88,_:0},{_:-31},{_:-4},{_:-10},{21:3,22:4,23:5,24:6,25:7,26:8,27:94,32:9,_:0},{21:3,
22:4,23:5,24:6,25:7,26:8,27:95,32:9,_:0},{21:3,22:4,23:5,24:6,25:7,26:8,28:96,32:9,_:0},{21:3,22:4,23:5,24:6,25:7,26:8,28:97,32:9,_:0},{21:3,22:4,23:5,24:6,25:7,26:8,29:98,32:9,_:0},{_:-6},{_:-7},{_:-8},{_:-9},{_:-5}],actionIndex:[0,1,2,3,4,5,5,5,6,5,7,8,9,5,5,5,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,29,30,31,32,33,34,35,36,37,38,5,5,5,5,5,39,5,5,5,40,41,42,43,43,0,44,45,46,47,5,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,0,0,0,0,64,0,65,66,67,68,69,70,71,72,73,74,75],tGoto:[{14:1,
16:2},,{9:10,15:11,17:12},,{0:22,1:23,2:24,3:25,4:26,5:27,6:28,7:29,8:30,11:31,12:32},{0:22,1:23,2:24,3:25,4:26,5:27,6:28,7:29,8:30,11:35,12:32},{0:22,1:23,2:24,3:25,4:26,5:27,6:28,7:29,8:30,11:36,12:32},{0:22,1:23,2:24,3:25,4:26,5:27,6:28,7:29,8:30,11:37,12:32},,{0:22,1:23,2:24,3:25,4:26,5:27,6:28,7:29,8:30,11:39,12:32},,,{9:40},{4:26,6:28,8:41,12:32},{0:22,1:23,2:24,3:25,4:26,5:27,6:28,7:29,8:30,11:42,12:32},{4:26,6:28,8:43,12:32},,,,,{12:45},,,,,,,,,,,,,,,{12:57,13:58},{12:57,13:59},,,,,,,,,,{4:26,
5:66,6:28,8:30,12:32},{4:26,5:67,6:28,8:30,12:32},{0:22,4:26,5:27,6:28,7:68,8:30,12:32},{0:22,1:69,4:26,5:27,6:28,7:29,8:30,12:32},{0:22,1:23,2:70,4:26,5:27,6:28,7:29,8:30,12:32},{12:71},{0:22,1:23,2:24,3:25,4:26,5:27,6:28,7:29,8:30,11:72,12:32},{4:26,6:28,8:73,12:32},{0:74,4:26,5:27,6:28,8:30,12:32},,,,{10:75,12:57,13:76},{10:77,12:57,13:78},{16:79},,,,,{0:22,1:23,2:24,3:25,4:26,5:27,6:28,7:29,8:30,11:80,12:32},,,,,,,,,,,,,,{9:10,15:11,17:12},,,{16:89},{16:90},{16:91},{16:92},,{16:93},,{9:10,15:11,
17:12},{9:10,15:11,17:12},{9:10,15:11,17:12},{9:10,15:11,17:12},{9:10,15:11,17:12}],tRules:[[54,50],[50,52],[52],[52,52,51],[51,25,47,34,52,29],[51,25,47,34,52,31,52,29],[51,23,47,49,46,34,52,27],[51,23,47,49,49,34,52,27],[51,24,47,49,46,34,52,28],[51,24,47,49,49,34,52,28],[51,22,19,48,8,47,34],[51,22,47,34],[51,32,47,35],[51,53],[51,22,13,20,34],[49,20],[49,48],[53,45],[53,53,45],[45,21],[45,26,16,30],[48,17],[48,19],[48,13],[42,20],[42,15],[42,11],[42,48],[42,3,47,4],[40,42],[40,40,7,48],[40,40,
9,47,10],[44,40],[44,1,44],[44,6,44],[41,44],[41,41,14,44],[36,41],[36,36,5,41],[36,36,6,41],[43,36],[43,43,18,36],[37,43],[37,37,12,43],[38,37],[38,38,2,37],[39,38],[39,39,33,38],[47,39],[46]],tFuncs:function(){function a(a,b,c,d,e,f,h){return["each",b,f,d,c,!0]}function f(a,b,c,d,e,f,h){return["each",b,f,d,c,!1]}function d(a){return a.text}function c(a,b,c){return[b.text,a,c]}return[,function(a){return["prog",a]},function(){return[]},function(a,b){a.push(b);return a},function(a,b,c,d,e){return["if",
b,d]},function(a,b,c,d,e,f,h){return["if",b,d,f]},a,a,f,f,function(a,b,c,d,e,f){return["set",c.text,e]},function(a,b,c){return["eval",b,!1]},function(a,b,c){return["eval",b,!0]},function(a){return["text",a]},function(a,b,c,d){return["inc",H(c.text)]},function(a){return H(a.text)},d,function(a){return a},function(a,b){return a+b},d,function(a,b,c){return b.text},,,,function(a){return["lit",H(a.text)]},function(a){return["lit",+a.text]},function(a){return["lit","true"==a.text]},function(a){return["id",
a.text]},function(a,b,c){return b},,function(a,b,c){return[".",a,c.text]},function(a,b,c,d){return["[]",a,c]},,function(a,b){return["!",b]},function(a,b){return["u-",b]},,c,,c,c,,c,,c,,c,,c]}()})}();return{parse:F,compile:J,render:function(a,f){return J(a)(f)},compileToPhp:function(a){return O(F(a),!0)},compileToVM:function(a,f){return P(F(a))},version:"1.2.7"}}();"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=B:"function"==typeof define&&(define.amd||define.cmd)?
define(function(){return B}):"undefined"!=typeof KISSY&&KISSY.add(function(){return B});D&&(D.Crox=B)})(this);
