/*
 Crox v1.2.6
 https://github.com/thx/crox

 Released under the MIT license
 md5: 7b8f2d37387983b4428d2ebf65417353
*/
(function(v){var h=function(){function h(b,a){this.row=b;this.col=a}function y(b,a){var c=b.substring(0,a),e=c.match(/\r\n?|\n/g),d=1;e&&(d+=e.length);c=1+/[^\r\n]*$/.exec(c)[0].length;return new h(d,c)}function v(b){return'"'+b.replace(/[\x00-\x1f"\\\u2028\u2029]/g,function(a){switch(a){case '"':return'\\"';case "\\":return"\\\\";case "\b":return"\\b";case "\f":return"\\f";case "\n":return"\\n";case "\r":return"\\r";case "\t":return"\\t"}return"\\u"+("000"+a.charCodeAt(0).toString(16)).slice(-4)})+
'"'}function H(b){function a(a,d,e,b){this.tag=a;this.text=d;this.index=e;this.subMatches=b}function c(){}function e(a){for(var d=1,e=[],b=[1],k=[],g=0;g<a.length;++g)b.push(d+=RegExp("|"+a[g][0].source).exec("").length),k.push(a[g][1]||c),e.push("("+a[g][0].source+")");return[RegExp(e.join("|")+"|","g"),b,k]}a.prototype.toString=function(){return this.text};var d=b.$||"$",k={},f;for(f in b)"$"!=f.charAt(0)&&(k[f]=e(b[f]));return function(e){var b=e.length,n=0,c=[""],f={text:"",index:0,source:e,pushState:function(a){c.push(a)},
popState:function(){c.pop()},retract:function(a){n-=a}};return{scan:function(){do{var g;a:{var u=k[c[c.length-1]],l=u[0];l.lastIndex=n;g=l.exec(e);if(""==g[0]){if(n<b)throw Error("lexer error: "+y(e,n)+"\n"+e.slice(n,n+50));g=new a(d,"",n)}else{f.index=n;n=l.lastIndex;for(var l=u[1],q=0;q<l.length;++q)if(g[l[q]]){u=u[2][q].apply(f,g.slice(l[q],l[q+1]));g=new a(u,g[0],f.index,g.slice(l[q]+1,l[q+1]));break a}g=void 0}}}while(null==g.tag);return g},getPos:function(a){return y(e,a)},reset:function(){n=
0;c=[""]}}}}function z(b){var a;a:{switch(b){case "id":case "lit":a=!0;break a}a=!1}return a||"."==b||"[]"==b}function x(b){return z(b)||"!"==b||"u-"==b}function A(b){if(x(b))return!0;switch(b){case "*":case "/":case "%":return!0}return!1}function B(b){if(A(b))return!0;switch(b){case "+":case "-":return!0}return!1}function C(b){if(B(b))return!0;switch(b){case "<":case ">":case "<=":case ">=":return!0}return!1}function D(b){if(C(b))return!0;switch(b){case "eq":case "ne":return!0}return!1}function E(b){return D(b)||
"&&"==b}function I(b){return E(b)||"||"==b}function J(b,a){function c(a){t+=f+a+"\n"}function e(d){for(var b=0;b<d.length;++b){var p=d[b];switch(p[0]){case "if":c("if("+k(p[1])+"){");f+="\t";e(p[2]);f=f.slice(0,-1);c("}");p[3]&&(c("else{"),f+="\t",e(p[3]),f=f.slice(0,-1),c("}"));break;case "each":++w;var g=p[3]||"$i",u="$list"+(1==w?"":w);c("var "+u+" = "+k(p[1])+";");c("for(var "+g+" in "+u+") {");f+="\t";c("var "+p[4]+" = "+u+"["+g+"];");e(p[2]);f=f.slice(0,-1);c("}");--w;break;case "set":c("var "+
p[1]+"="+k(p[2])+";");break;case "eval":g=k(p[1]);p[2]&&(g=a+"("+g+")");c("$s += "+g+";");break;case "text":c("$s += "+v(p[1])+";");break;case "inc":break;default:throw Error("unknown stmt: "+p[0]);}}}function d(a,d){var e=k(a);d&&!d(a[0])&&(e="("+e+")");return e}function k(a){switch(a[0]){case "id":return a[1];case "lit":return"string"==typeof a[1]?v(a[1]):String(a[1]);case ".":return d(a[1],z)+"."+a[2];case "[]":return d(a[1],z)+"["+k(a[2])+"]";case "!":return"!"+d(a[1],x);case "u-":return"- "+
d(a[1],x);case "*":case "/":case "%":return d(a[1],A)+a[0]+d(a[2],x);case "+":case "-":return d(a[1],B)+a[0]+" "+d(a[2],A);case "<":case ">":case "<=":case ">=":return d(a[1],C)+a[0]+d(a[2],B);case "eq":case "ne":return d(a[1],D)+("eq"==a[0]?"===":"!==")+d(a[2],C);case "&&":return d(a[1],E)+"&&"+d(a[2],D);case "||":return d(a[1],I)+"||"+d(a[2],E);default:throw Error("unknown expr: "+a[0]);}}var f="\t",w=0,t="";e(b[1]);return t}function F(b){return K(L(b))}function G(b,a){var c=F(b),e;a&&(e=a.htmlEncode);
var c=J(c,e||"$htmlEncode"),d="";e||(d+="var obj = { '<': '&lt;', '>': '&gt;', '&': '&amp;', '\"': '&quot;' };\n\tfunction $htmlEncode(s) {\n\t\treturn String(s).replace(/[<>&\"]/g, function(c) {\n\t\t\treturn obj[c];\n\t\t});\n\t}");d=d+"var $s = '';"+c;d+="return $s;";return Function("root",d)}h.prototype.toString=function(){return"("+this.row+","+this.col+")"};var L=function(){var b=[[/\s+/,function(){return null}],[/[A-Za-z_]\w*/,function(a){switch(a){case "true":case "false":return"boolean";
case "set":case "include":return a;default:if(-1!=" abstract boolean break byte case catch char class const continue debugger default delete do double else enum export extends final finally float for function goto if implements import in instanceof int interface let long native new package private protected public return short static super switch synchronized this throw throws transient try typeof var void volatile while with yield ".indexOf(" "+a+" ")||"null"==a)throw Error("Reserved: "+a+" "+y(this.source,
this.index));return"realId"}}],[/"(?:[^"\\]|\\[\s\S])*"|'(?:[^'\\]|\\[\s\S])*'/,function(a){return"string"}],[/\d+(?:\.\d+)?(?:e-?\d+)?/,function(a){return"number"}],[function(a){a.sort().reverse();for(var b=0;b<a.length;++b)a[b]=a[b].replace(/[()*+?.[\]|]/g,"\\$&");return RegExp(a.join("|"))}("! % && ( ) * + - . / < <= = > >= [ ] || === !==".split(" ")),function(a){switch(a){case "===":return"eq";case "!==":return"ne";default:return a}}]];return H({"":[[/(?:(?!{{)[\s\S])+/,function(a){return"{{"==
a.substring(0,2)?(this.pushState(a),a):"text"}],[/{{{/,function(a){this.pushState(a);return a}],[/{{(?:\/if|else|\/each|\/raw)}}/,function(a){return a}],[/{{#raw}}/,function(a){this.pushState("raw");return a}],[/{{(?:#(?:if|each)(?=\s))?/,function(a){this.pushState("{{");return a}]],raw:[[/(?:(?!{{\/raw}})[\s\S])+/,function(a){this.popState();return"rawtext"}]],"{{":b.concat([[/}}/,function(a){this.popState();return a}]]),"{{{":b.concat([[/}}}/,function(a){this.popState();return a}]])})}(),K=function(){return function(b){function a(a,
e){return f[a][e]}for(var c=b.nStart,e=b.tSymbols,d={},k=0;k<e.length;++k)d[e[k]]=k;var f=b.tAction,w=b.tGoto,t=b.tRules,n=b.tFuncs,h=b.actionIndex;h&&(a=function(a,e){var d=f[h[a]];return d[e]||d._});return function(b,k){function f(a){throw Error("Syntax error: "+b.getPos(h.index)+(a?"\n"+a:""));}var l=0,q=[0],h=b.scan(),r=[],v={get:function(a){return r[r.length+a]},set:function(a,e){r[r.length+a]=e}};if(k)for(var m in k)v[m]=k[m];for(;;)if(m=a(l,d[h.tag]))if(0<m)q.push(l=m),r.push(h),h=b.scan();
else if(0>m&&-32768<m){m=-m;var l=t[m],s=l.length-1;q.length-=s;l=w[q[q.length-1]][l[0]-c];q.push(l);n[m]?(m=n[m].apply(v,r.splice(r.length-s,s)),r.push(m)):1!=s&&r.splice(r.length-s,s,null)}else return h.tag!=e[0]&&f(),r[0];else{m=[];for(s=0;s<c;++s)a(l,s)&&m.push(e[s]);f("find "+h.tag+"\nexpect "+m.join(" "))}}}({nStart:40,tSymbols:"$ ! % && ( ) * + - . / < <= = > >= [ ] boolean eq include ne number rawtext realId set string text {{ {{#each {{#if {{#raw}} {{/each}} {{/if}} {{/raw}} {{else}} {{{ || }} }}} AdditiveExpression EqualityExpression LogicalAndExpression LogicalOrExpression MemberExpression MultiplicativeExpression PrimaryExpression RelationalExpression UnaryExpression _text epsilon expr id program statement statements texts".split(" "),
tAction:[{_:-2},{_:-32768},{27:3,28:4,29:5,30:6,31:7,36:8,_:-1},{_:-15},{1:12,4:13,8:14,18:15,20:16,22:17,24:18,25:19,26:20,_:0},{1:12,4:13,8:14,18:15,20:32,22:17,24:18,25:33,26:20,_:0},{23:36,_:0},{_:-13},{_:-3},{27:3,31:7,_:-11},{_:-22},{26:42,_:-19},{_:-21},{_:-17},{20:32,24:18,25:33,_:-18},{_:-20},{7:44,8:45,_:-38},{19:46,21:47,_:-46},{3:48,_:-48},{37:49,_:-50},{9:50,16:51,_:-28},{2:52,6:53,10:54,_:-35},{_:-25},{11:55,12:56,14:57,15:58,_:-43},{_:-31},{38:59,_:0},{_:-23},{_:-19},{_:-18},{26:60,
_:0},{38:61,_:0},{34:62,_:0},{39:63,_:0},{_:-14},{_:-29},{5:64,_:0},{_:-30},{38:65,_:0},{13:66,_:0},{20:32,24:18,25:33,_:0},{_:-9},{26:82,_:-51},{_:-16},{_:-10},{_:-24},{_:-12},{2:52,6:53,10:54,_:-36},{2:52,6:53,10:54,_:-37},{11:55,12:56,14:57,15:58,_:-44},{11:55,12:56,14:57,15:58,_:-45},{19:46,21:47,_:-47},{3:48,_:-49},{_:-26},{17:86,_:0},{_:-34},{_:-32},{_:-33},{7:44,8:45,_:-39},{7:44,8:45,_:-41},{7:44,8:45,_:-40},{7:44,8:45,_:-42},{38:87,_:0},{38:88,_:0},{27:3,28:4,29:5,30:6,31:7,33:89,35:90,36:8,
_:0},{38:91,_:0},{_:-27},{_:-4},{_:-8},{27:3,28:4,29:5,30:6,31:7,32:95,36:8,_:0},{27:3,28:4,29:5,30:6,31:7,32:96,36:8,_:0},{27:3,28:4,29:5,30:6,31:7,33:97,36:8,_:0},{_:-7},{_:-6},{_:-5}],actionIndex:[0,1,2,3,4,5,5,6,5,7,8,9,5,5,5,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,5,5,5,5,5,5,39,5,5,5,5,5,5,5,5,40,41,0,42,43,44,45,5,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,0,0,66,0,67,68,69,70,71,72,73],tGoto:[{13:1,15:2},,{9:9,14:10,16:11},,{0:21,
1:22,2:23,3:24,4:25,5:26,6:27,7:28,8:29,11:30,12:31},{0:21,1:22,2:23,3:24,4:25,5:26,6:27,7:28,8:29,11:34,12:31},{0:21,1:22,2:23,3:24,4:25,5:26,6:27,7:28,8:29,11:35,12:31},,{0:21,1:22,2:23,3:24,4:25,5:26,6:27,7:28,8:29,11:37,12:31},,,{9:38},{4:25,6:27,8:39,12:31},{0:21,1:22,2:23,3:24,4:25,5:26,6:27,7:28,8:29,11:40,12:31},{4:25,6:27,8:41,12:31},,,,,{12:43},,,,,,,,,,,,,,,,,,,,,,,,,{4:25,5:67,6:27,8:29,12:31},{4:25,5:68,6:27,8:29,12:31},{0:21,4:25,5:26,6:27,7:69,8:29,12:31},{0:21,4:25,5:26,6:27,7:70,
8:29,12:31},{0:21,1:71,4:25,5:26,6:27,7:28,8:29,12:31},{0:21,1:22,2:72,4:25,5:26,6:27,7:28,8:29,12:31},{12:73},{0:21,1:22,2:23,3:24,4:25,5:26,6:27,7:28,8:29,11:74,12:31},{4:25,6:27,8:75,12:31},{4:25,6:27,8:76,12:31},{4:25,6:27,8:77,12:31},{0:78,4:25,5:26,6:27,8:29,12:31},{0:79,4:25,5:26,6:27,8:29,12:31},{0:80,4:25,5:26,6:27,8:29,12:31},{0:81,4:25,5:26,6:27,8:29,12:31},,{10:83},{15:84},,,,,{0:21,1:22,2:23,3:24,4:25,5:26,6:27,7:28,8:29,11:85,12:31},,,,,,,,,,,,,,,,,,{9:9,14:10,16:11},,,{15:92},{15:93},
,{15:94},,{9:9,14:10,16:11},{9:9,14:10,16:11},{9:9,14:10,16:11}],tRules:[[57,53],[53,55],[55],[55,55,54],[54,30,51,38,55,33],[54,30,51,38,55,35,55,33],[54,29,51,26,50,38,55,32],[54,29,51,26,26,38,55,32],[54,28,25,52,13,51,38],[54,28,51,38],[54,36,51,39],[54,56],[54,28,20,26,38],[56,49],[56,56,49],[49,27],[49,31,23,34],[52,24],[52,25],[52,20],[46,26],[46,22],[46,18],[46,52],[46,4,51,5],[44,46],[44,44,9,52],[44,44,16,51,17],[48,44],[48,1,48],[48,8,48],[45,48],[45,45,6,48],[45,45,10,48],[45,45,2,48],
[40,45],[40,40,7,45],[40,40,8,45],[47,40],[47,47,11,40],[47,47,14,40],[47,47,12,40],[47,47,15,40],[41,47],[41,41,19,47],[41,41,21,47],[42,41],[42,42,3,41],[43,42],[43,43,37,42],[51,43],[50]],tFuncs:function(){function b(a,b,c,f,h,t,n){return["each",b,t,f&&eval(f.text),eval(c.text)]}function a(a){return["lit",eval(a.text)]}function c(a,b,c){return[b.text,a,c]}return[,function(a){return["prog",a]},function(){return[]},function(a,b){a.push(b);return a},function(a,b,c,f,h){return["if",b,f]},function(a,
b,c,f,h,t,n){return["if",b,f,t]},b,b,function(a,b,c,f,h,t){return["set",c.text,h]},function(a,b,c){return["eval",b,!0]},function(a,b,c){return["eval",b,!1]},function(a){return["text",a]},function(a,b,c,f){return["inc",eval(c.text)]},function(a){return a},function(a,b){return a+b},function(a){return a.text},function(a,b,c){return b.text},,,,a,a,function(a){return["lit","true"==a.text]},function(a){return["id",a.text]},function(a,b,c){return b},,function(a,b,c){return[".",a,c.text]},function(a,b,c,
f){return["[]",a,c]},,function(a,b){return["!",b]},function(a,b){return["u-",b]},,c,c,c,,c,c,,c,c,c,c,,function(a,b,c){return["eq",a,c]},function(a,b,c){return["ne",a,c]},,c,,c]}()})}();return{parse:F,compile:G,render:function(b,a){return G(b)(a)},version:"1.2.6"}}();"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=h:"function"==typeof define&&(define.amd||define.cmd)?define(function(){return h}):"undefined"!=typeof KISSY&&KISSY.add(function(){return h});v&&(v.Crox=
h)})(this);
