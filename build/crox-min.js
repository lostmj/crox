/*
 Crox v1.2.1
 https://github.com/thx/crox

 Released under the MIT license
 md5: 432c1c49d9d2360ddd6ac3a5feb20ff0
*/
(function(l){var r=function(){function r(a,d){this.row=a;this.col=d}function x(a,d){var c=a.substring(0,d),f=c.match(/\r\n?|\n/g),b=1;f&&(b+=f.length);c=1+/[^\r\n]*$/.exec(c)[0].length;return new r(b,c)}function l(a){return'"'+a.replace(/[\x00-\x1f"\\\u2028\u2029]/g,function(d){switch(d){case '"':return'\\"';case "\\":return"\\\\";case "\b":return"\\b";case "\f":return"\\f";case "\n":return"\\n";case "\r":return"\\r";case "\t":return"\\t"}return"\\u"+("000"+d.charCodeAt(0).toString(16)).slice(-4)})+
'"'}function G(a){function d(d,b,a,f){this.tag=d;this.text=b;this.index=a;this.subMatches=f}function c(){}function f(d){for(var b=1,a=[],f=[1],g=[],e=0;e<d.length;++e)f.push(b+=RegExp("|"+d[e][0].source).exec("").length),g.push(d[e][1]||c),a.push("("+d[e][0].source+")");return[RegExp(a.join("|")+"|","g"),f,g]}d.prototype.toString=function(){return this.text};var b=a.$||"$",g={},e;for(e in a)"$"!=e.charAt(0)&&(g[e]=f(a[e]));return function(a){var f=a.length,c=0,e=[""],u={text:"",index:0,source:a,pushState:function(a){e.push(a)},
popState:function(){e.pop()},retract:function(a){c-=a}};return{scan:function(){do{var p;a:{var q=g[e[e.length-1]],h=q[0];h.lastIndex=c;p=h.exec(a);if(""==p[0]){if(c<f)throw Error("lexer error: "+x(a,c)+"\n"+a.slice(c,c+50));p=new d(b,"",c)}else{u.index=c;c=h.lastIndex;for(var h=q[1],n=0;n<h.length;++n)if(p[h[n]]){q=q[2][n].apply(u,p.slice(h[n],h[n+1]));p=new d(q,p[0],u.index,p.slice(h[n]+1,h[n+1]));break a}p=void 0}}}while(null==p.tag);return p},getPos:function(d){return x(a,d)},reset:function(){c=
0;e=[""]}}}}function y(a){var d;a:{switch(a){case "id":case "lit":d=!0;break a}d=!1}return d||"."==a||"[]"==a}function w(a){return y(a)||"!"==a||"u-"==a}function z(a){if(w(a))return!0;switch(a){case "*":case "/":case "%":return!0}return!1}function A(a){if(z(a))return!0;switch(a){case "+":case "-":return!0}return!1}function B(a){if(A(a))return!0;switch(a){case "<":case ">":case "<=":case ">=":return!0}return!1}function C(a){if(B(a))return!0;switch(a){case "eq":case "ne":return!0}return!1}function D(a){return C(a)||
"&&"==a}function H(a){return D(a)||"||"==a}function I(a,d){function c(a){v+=e+a+"\n"}function f(a){for(var b=0;b<a.length;++b){var m=a[b];switch(m[0]){case "if":c("if("+g(m[1])+"){");e+="\t";f(m[2]);e=e.slice(0,-1);c("}");m[3]&&(c("else{"),e+="\t",f(m[3]),e=e.slice(0,-1),c("}"));break;case "each":var u=m[3]||"$i";c("var $list = "+g(m[1])+";");c("for(var "+u+" in $list) {");e+="\t";c("var "+m[4]+" = $list["+u+"];");f(m[2]);e=e.slice(0,-1);c("}");break;case "set":c("var "+m[1]+"="+g(m[2])+";");break;
case "eval":u=g(m[1]);m[2]&&(u=d+"("+u+")");c("$s += "+u+";");break;case "text":c("$s += "+l(m[1])+";");break;case "inc":break;case "raw":c(m[1]);break;default:throw Error("unknown stmt: "+m[0]);}}}function b(a,d){var b=g(a);d&&!d(a[0])&&(b="("+b+")");return b}function g(a){switch(a[0]){case "id":return a[1];case "lit":return"string"==typeof a[1]?l(a[1]):String(a[1]);case ".":return b(a[1],y)+"."+a[2];case "[]":return b(a[1],y)+"["+g(a[2])+"]";case "!":return"!"+b(a[1],w);case "u-":return"- "+b(a[1],
w);case "*":case "/":case "%":return b(a[1],z)+a[0]+b(a[2],w);case "+":case "-":return b(a[1],A)+a[0]+" "+b(a[2],z);case "<":case ">":case "<=":case ">=":return b(a[1],B)+a[0]+b(a[2],A);case "eq":case "ne":return b(a[1],C)+("eq"==a[0]?"===":"!==")+b(a[2],B);case "&&":return b(a[1],D)+"&&"+b(a[2],C);case "||":return b(a[1],H)+"||"+b(a[2],D);default:throw Error("unknown expr: "+a[0]);}}var e="\t",v="";f(a[1]);return v}function E(a){return J(K(a))}function F(a,d){var c=E(a),f;d&&(f=d.htmlEncode);var c=
I(c,f||"$htmlEncode"),b="";f||(b+="var obj = { '<': '&lt;', '>': '&gt;', '&': '&amp;', '\"': '&quot;' };\n\tfunction $htmlEncode(s) {\n\t\treturn String(s).replace(/[<>&\"]/g, function(c) {\n\t\t\treturn obj[c];\n\t\t});\n\t}");b=b+"var $s = '';"+c;b+="return $s;";return Function("root",b)}r.prototype.toString=function(){return"("+this.row+","+this.col+")"};var K=function(){var a=[[/\s+/,function(){return null}],[/[A-Za-z_]\w*/,function(a){switch(a){case "true":case "false":return"boolean";case "set":case "include":return a;
default:if(-1!=" abstract boolean break byte case catch char class const continue debugger default delete do double else enum export extends final finally float for function goto if implements import in instanceof int interface let long native new package private protected public return short static super switch synchronized this throw throws transient try typeof var void volatile while with yield ".indexOf(" "+a+" ")||"null"==a)throw Error("Reserved: "+a+" "+x(this.source,this.index));return"realId"}}],
[/"(?:[^"\\]|\\[\s\S])*"|'(?:[^'\\]|\\[\s\S])*'/,function(a){return"string"}],[/\d+(?:\.\d+)?(?:e-?\d+)?/,function(a){return"number"}],[function(a){a.sort().reverse();for(var c=0;c<a.length;++c)a[c]=a[c].replace(/[()*+?.[\]|]/g,"\\$&");return RegExp(a.join("|"))}("! % && ( ) * + - . / < <= = > >= [ ] || === !==".split(" ")),function(a){switch(a){case "===":return"eq";case "!==":return"ne";default:return a}}]];return G({"":[[/(?:(?!{{)[\s\S])+/,function(a){return"{{"==a.substring(0,2)?(this.pushState(a),
a):"text"}],[/{{{/,function(a){this.pushState(a);return a}],[/{{(?:\/if|else|\/each|\/raw)}}/,function(a){return a}],[/{{#raw}}/,function(a){this.pushState("raw");return a}],[/{{(?:#(?:if|each)(?=\s))?/,function(a){this.pushState("{{");return a}]],raw:[[/(?:(?!{{\/raw}})[\s\S])+/,function(a){this.popState();return"rawtext"}]],"{{":a.concat([[/}}/,function(a){this.popState();return a}]]),"{{{":a.concat([[/}}}/,function(a){this.popState();return a}]])})}(),J=function(){return function(a){function d(a,
b){return g[a][b]}var c=a.nStart,f=a.tSymbols,b=a.tSymbolIndex,g=a.tAction,e=a.tGoto,v=a.tRules,r=a.tFuncs,l=a.actionIndex;l&&(d=function(a,b){var f=g[l[a]];return f[b]||f._});return function(a,g){function p(b){throw Error("Syntax error: "+a.getPos(n.index)+(b?"\n"+b:""));}var q=0,h=[0],n=a.scan(),s=[],l={get:function(a){return s[s.length+a]},set:function(a,b){s[s.length+a]=b}};if(g)for(var k in g)l[k]=g[k];for(;;)if(k=d(q,b[n.tag]))if(0<k)h.push(q=k),s.push(n),n=a.scan();else if(0>k&&-32768<k){k=
-k;var q=v[k],t=q.length-1;h.length-=t;q=e[h[h.length-1]][q[0]-c];h.push(q);r[k]?(k=r[k].apply(l,s.splice(s.length-t,t)),s.push(k)):1!=t&&s.splice(s.length-t,t,null)}else return n.tag!=f[0]&&p(),s[0];else{k=[];for(t=0;t<c;++t)d(q,t)&&k.push(f[t]);p("find "+n.tag+"\nexpect "+k.join(" "))}}}({nStart:40,tSymbols:"$ ! % && ( ) * + - . / < <= = > >= [ ] boolean eq include ne number rawtext realId set string text {{ {{#each {{#if {{#raw}} {{/each}} {{/if}} {{/raw}} {{else}} {{{ || }} }}} AdditiveExpression EqualityExpression LogicalAndExpression LogicalOrExpression MemberExpression MultiplicativeExpression PrimaryExpression RelationalExpression UnaryExpression epsilon expr id program statement statements".split(" "),
tSymbolIndex:{$:0,"!":1,"%":2,"&&":3,"(":4,")":5,"*":6,"+":7,"-":8,".":9,"/":10,"<":11,"<=":12,"=":13,">":14,">=":15,"[":16,"]":17,"boolean":18,eq:19,include:20,ne:21,number:22,rawtext:23,realId:24,set:25,string:26,text:27,"{{":28,"{{#each":29,"{{#if":30,"{{#raw}}":31,"{{/each}}":32,"{{/if}}":33,"{{/raw}}":34,"{{else}}":35,"{{{":36,"||":37,"}}":38,"}}}":39,AdditiveExpression:40,EqualityExpression:41,LogicalAndExpression:42,LogicalOrExpression:43,MemberExpression:44,MultiplicativeExpression:45,PrimaryExpression:46,
RelationalExpression:47,UnaryExpression:48,epsilon:49,expr:50,id:51,program:52,statement:53,statements:54},tAction:[{_:-2},{_:-32768},{27:3,28:4,29:5,30:6,31:7,36:8,_:-1},{_:-11},{1:10,4:11,8:12,18:13,20:14,22:15,24:16,25:17,26:18,_:0},{1:10,4:11,8:12,18:13,20:30,22:15,24:16,25:31,26:18,_:0},{23:34,_:0},{_:-3},{_:-19},{26:39,_:-16},{_:-18},{_:-14},{20:30,24:16,25:31,_:-15},{_:-17},{7:41,8:42,_:-35},{19:43,21:44,_:-43},{3:45,_:-45},{37:46,_:-47},{9:47,16:48,_:-25},{2:49,6:50,10:51,_:-32},{_:-22},{11:52,
12:53,14:54,15:55,_:-40},{_:-28},{38:56,_:0},{_:-20},{_:-16},{_:-15},{26:57,_:0},{38:58,_:0},{34:59,_:0},{39:60,_:0},{_:-26},{5:61,_:0},{_:-27},{38:62,_:0},{13:63,_:0},{20:30,24:16,25:31,_:0},{_:-9},{26:79,_:-48},{_:-13},{_:-10},{_:-21},{_:-12},{2:49,6:50,10:51,_:-33},{2:49,6:50,10:51,_:-34},{11:52,12:53,14:54,15:55,_:-41},{11:52,12:53,14:54,15:55,_:-42},{19:43,21:44,_:-44},{3:45,_:-46},{_:-23},{17:83,_:0},{_:-31},{_:-29},{_:-30},{7:41,8:42,_:-36},{7:41,8:42,_:-38},{7:41,8:42,_:-37},{7:41,8:42,_:-39},
{38:84,_:0},{38:85,_:0},{27:3,28:4,29:5,30:6,31:7,33:86,35:87,36:8,_:0},{38:88,_:0},{_:-24},{_:-4},{_:-8},{27:3,28:4,29:5,30:6,31:7,32:92,36:8,_:0},{27:3,28:4,29:5,30:6,31:7,32:93,36:8,_:0},{27:3,28:4,29:5,30:6,31:7,33:94,36:8,_:0},{_:-7},{_:-6},{_:-5}],actionIndex:[0,1,2,3,4,5,5,6,5,7,5,5,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,5,5,5,5,5,5,36,5,5,5,5,5,5,5,5,37,38,0,39,40,41,42,5,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,0,0,63,0,64,65,
66,67,68,69,70],tGoto:[{12:1,14:2},,{13:9},,{0:19,1:20,2:21,3:22,4:23,5:24,6:25,7:26,8:27,10:28,11:29},{0:19,1:20,2:21,3:22,4:23,5:24,6:25,7:26,8:27,10:32,11:29},{0:19,1:20,2:21,3:22,4:23,5:24,6:25,7:26,8:27,10:33,11:29},,{0:19,1:20,2:21,3:22,4:23,5:24,6:25,7:26,8:27,10:35,11:29},,{4:23,6:25,8:36,11:29},{0:19,1:20,2:21,3:22,4:23,5:24,6:25,7:26,8:27,10:37,11:29},{4:23,6:25,8:38,11:29},,,,,{11:40},,,,,,,,,,,,,,,,,,,,,,,,{4:23,5:64,6:25,8:27,11:29},{4:23,5:65,6:25,8:27,11:29},{0:19,4:23,5:24,6:25,7:66,
8:27,11:29},{0:19,4:23,5:24,6:25,7:67,8:27,11:29},{0:19,1:68,4:23,5:24,6:25,7:26,8:27,11:29},{0:19,1:20,2:69,4:23,5:24,6:25,7:26,8:27,11:29},{11:70},{0:19,1:20,2:21,3:22,4:23,5:24,6:25,7:26,8:27,10:71,11:29},{4:23,6:25,8:72,11:29},{4:23,6:25,8:73,11:29},{4:23,6:25,8:74,11:29},{0:75,4:23,5:24,6:25,8:27,11:29},{0:76,4:23,5:24,6:25,8:27,11:29},{0:77,4:23,5:24,6:25,8:27,11:29},{0:78,4:23,5:24,6:25,8:27,11:29},,{9:80},{14:81},,,,,{0:19,1:20,2:21,3:22,4:23,5:24,6:25,7:26,8:27,10:82,11:29},,,,,,,,,,,,,,
,,,,{13:9},,,{14:89},{14:90},,{14:91},,{13:9},{13:9},{13:9}],tRules:[[55,52],[52,54],[54],[54,54,53],[53,30,50,38,54,33],[53,30,50,38,54,35,54,33],[53,29,50,26,49,38,54,32],[53,29,50,26,26,38,54,32],[53,28,25,51,13,50,38],[53,28,50,38],[53,36,50,39],[53,27],[53,28,20,26,38],[53,31,23,34],[51,24],[51,25],[51,20],[46,26],[46,22],[46,18],[46,51],[46,4,50,5],[44,46],[44,44,9,51],[44,44,16,50,17],[48,44],[48,1,48],[48,8,48],[45,48],[45,45,6,48],[45,45,10,48],[45,45,2,48],[40,45],[40,40,7,45],[40,40,8,
45],[47,40],[47,47,11,40],[47,47,14,40],[47,47,12,40],[47,47,15,40],[41,47],[41,41,19,47],[41,41,21,47],[42,41],[42,42,3,41],[43,42],[43,43,37,42],[50,43],[49]],tFuncs:function(){function a(a,b,c,e,d,l,r){return["each",b,l,e&&eval(e.text),eval(c.text)]}function d(a){return["lit",eval(a.text)]}function c(a,b,c){return[b.text,a,c]}return[,function(a){return["prog",a]},function(){return[]},function(a,b){a.push(b);return a},function(a,b,c,e,d){return["if",b,e]},function(a,b,c,d,l,r,w){return["if",b,d,
r]},a,a,function(a,b,c,d,l,r){return["set",c.text,l]},function(a,b,c){return["eval",b,!0]},function(a,b,c){return["eval",b,!1]},function(a){return["text",a.text]},function(a,b,c,d){return["inc",eval(c.text)]},function(a,b,c){return["raw",b.text]},,,,d,d,function(a){return["lit","true"==a.text]},function(a){return["id",a.text]},function(a,b,c){return b},,function(a,b,c){return[".",a,c.text]},function(a,b,c,d){return["[]",a,c]},,function(a,b){return["!",b]},function(a,b){return["u-",b]},,c,c,c,,c,c,
,c,c,c,c,,function(a,b,c){return["eq",a,c]},function(a,b,c){return["ne",a,c]},,c,,c]}()})}();return{parse:E,compile:F,render:function(a,d){return F(a)(d)},version:"1.2.1"}}();"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=r:"function"==typeof define&&(define.amd||define.cmd)?define(function(){return r}):"undefined"!=typeof KISSY&&KISSY.add(function(){return r});l&&(l.Crox=r)})(this);
