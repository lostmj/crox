/*
 Crox v1.2.1
 https://github.com/thx/crox

 Released under the MIT license
 md5: 8a463bfec8a996c695baed255dcd3997
*/
(function(v){var t=function(){function t(a,e){this.row=a;this.col=e}function x(a,e){var b=a.substring(0,e),g=b.match(/\r\n?|\n/g),c=1;g&&(c+=g.length);b=1+/[^\r\n]*$/.exec(b)[0].length;return new t(c,b)}function v(a){return'"'+a.replace(/[\x00-\x1f"\\\u2028\u2029]/g,function(e){switch(e){case '"':return'\\"';case "\\":return"\\\\";case "\b":return"\\b";case "\f":return"\\f";case "\n":return"\\n";case "\r":return"\\r";case "\t":return"\\t"}return"\\u"+("000"+e.charCodeAt(0).toString(16)).slice(-4)})+
'"'}function H(a){function e(e,p,a,d){this.tag=e;this.text=p;this.index=a;this.subMatches=d}function b(){}function g(e){for(var p=1,a=[],d=[1],c=[],h=0;h<e.length;++h)d.push(p+=RegExp("|"+e[h][0].source).exec("").length),c.push(e[h][1]||b),a.push("("+e[h][0].source+")");return[RegExp(a.join("|")+"|","g"),d,c]}e.prototype.toString=function(){return this.text};var c=a.$||"$",k={},d;for(d in a)"$"!=d.charAt(0)&&(k[d]=g(a[d]));return function(a){var p=a.length,d=0,b=[""],s={text:"",index:0,source:a,pushState:function(a){b.push(a)},
popState:function(){b.pop()},retract:function(a){d-=a}};return{scan:function(){do{var h;a:{var g=k[b[b.length-1]],l=g[0];l.lastIndex=d;h=l.exec(a);if(""==h[0]){if(d<p)throw Error("lexer error: "+x(a,d)+"\n"+a.slice(d,d+50));h=new e(c,"",d)}else{s.index=d;d=l.lastIndex;for(var l=g[1],n=0;n<l.length;++n)if(h[l[n]]){g=g[2][n].apply(s,h.slice(l[n],l[n+1]));h=new e(g,h[0],s.index,h.slice(l[n]+1,l[n+1]));break a}h=void 0}}}while(null==h.tag);return h},getPos:function(d){return x(a,d)},reset:function(){d=
0;b=[""]}}}}function y(a){var e;a:{switch(a){case "id":case "lit":e=!0;break a}e=!1}return e||"."==a||"[]"==a}function w(a){return y(a)||"!"==a||"u-"==a}function z(a){if(w(a))return!0;switch(a){case "*":case "/":case "%":return!0}return!1}function A(a){if(z(a))return!0;switch(a){case "+":case "-":return!0}return!1}function B(a){if(A(a))return!0;switch(a){case "<":case ">":case "<=":case ">=":return!0}return!1}function C(a){if(B(a))return!0;switch(a){case "eq":case "ne":return!0}return!1}function D(a){return C(a)||
"&&"==a}function I(a){return D(a)||"||"==a}function J(a,e){function b(a){f+=d+a+"\n"}function g(a){for(var c=0;c<a.length;++c){var f=a[c];switch(f[0]){case "if":b("if("+k(f[1])+"){");d+="\t";g(f[2]);d=d.slice(0,-1);b("}");f[3]&&(b("else{"),d+="\t",g(f[3]),d=d.slice(0,-1),b("}"));break;case "each":var s=f[3]||"$i";b("var $list = "+k(f[1])+";");b("for(var "+s+" in $list) {");d+="\t";b("var "+f[4]+" = $list["+s+"];");g(f[2]);d=d.slice(0,-1);b("}");break;case "set":b("var "+f[1]+"="+k(f[2])+";");break;
case "eval":s=k(f[1]);f[2]&&(s=e+"("+s+")");b("$s += "+s+";");break;case "text":b("$s += "+v(f[1])+";");break;case "inc":break;case "raw":b(f[1]);break;default:throw Error("unknown stmt: "+f[0]);}}}function c(a,d){var e=k(a);d&&!d(a[0])&&(e="("+e+")");return e}function k(a){switch(a[0]){case "id":return a[1];case "lit":return"string"==typeof a[1]?v(a[1]):String(a[1]);case ".":return c(a[1],y)+"."+a[2];case "[]":return c(a[1],y)+"["+k(a[2])+"]";case "!":return"!"+c(a[1],w);case "u-":return"- "+c(a[1],
w);case "*":case "/":case "%":return c(a[1],z)+a[0]+c(a[2],w);case "+":case "-":return c(a[1],A)+a[0]+" "+c(a[2],z);case "<":case ">":case "<=":case ">=":return c(a[1],B)+a[0]+c(a[2],A);case "eq":case "ne":return c(a[1],C)+("eq"==a[0]?"===":"!==")+c(a[2],B);case "&&":return c(a[1],D)+"&&"+c(a[2],C);case "||":return c(a[1],I)+"||"+c(a[2],D);default:throw Error("unknown expr: "+a[0]);}}var d="\t",f="";g(a[1]);return f}function F(a){return K(L(a))}function G(a,e){var b=F(a),g;e&&(g=e.htmlEncode);var b=
J(b,g||"$htmlEncode"),c="";g||(c+="var obj = { '<': '&lt;', '>': '&gt;', '&': '&amp;', '\"': '&quot;' };\n\tfunction $htmlEncode(s) {\n\t\treturn String(s).replace(/[<>&\"]/g, function(c) {\n\t\t\treturn obj[c];\n\t\t});\n\t}");c=c+"var $s = '';"+b;c+="return $s;";return Function("root",c)}t.prototype.toString=function(){return"("+this.row+","+this.col+")"};var L=function(){var a=[[/\s+/,function(){return null}],[/[A-Za-z_]\w*/,function(a){switch(a){case "true":case "false":return"boolean";case "set":case "include":return a;
default:if(-1!=" abstract boolean break byte case catch char class const continue debugger default delete do double else enum export extends final finally float for function goto if implements import in instanceof int interface let long native new package private protected public return short static super switch synchronized this throw throws transient try typeof var void volatile while with yield ".indexOf(" "+a+" ")||"null"==a)throw Error("Reserved: "+a+" "+x(this.source,this.index));return"realId"}}],
[/"(?:[^"\\]|\\[\s\S])*"|'(?:[^'\\]|\\[\s\S])*'/,function(a){return"string"}],[/\d+(?:\.\d+)?(?:e-?\d+)?/,function(a){return"number"}],[function(a){a.sort().reverse();for(var b=0;b<a.length;++b)a[b]=a[b].replace(/[()*+?.[\]|]/g,"\\$&");return RegExp(a.join("|"))}("! % && ( ) * + - . / < <= = > >= [ ] || === !==".split(" ")),function(a){switch(a){case "===":return"eq";case "!==":return"ne";default:return a}}]];return H({"":[[/(?:(?!{{)[\s\S])+/,function(a){return"{{"==a.substring(0,2)?(this.pushState(a),
a):"text"}],[/{{{/,function(a){this.pushState(a);return a}],[/{{(?:\/if|else|\/each|\/raw)}}/,function(a){return a}],[/{{#raw}}/,function(a){this.pushState("raw");return a}],[/{{(?:#(?:if|each)(?=\s))?/,function(a){this.pushState("{{");return a}]],raw:[[/(?:(?!{{\/raw}})[\s\S])+/,function(a){this.popState();return"rawtext"}]],"{{":a.concat([[/}}/,function(a){this.popState();return a}]]),"{{{":a.concat([[/}}}/,function(a){this.popState();return a}]])})}(),K=function(){return function(a){function e(a,
d){return c[a][d]}var b=a.nStart,g=a.tSymbols,c=a.tAction,k=a.tGoto,d=a.tRules,f=a.tFuncs,p=a.actionIndex,E={};for(a=0;a<g.length;++a)E[g[a]]=a;p&&(e=function(a,d){var f=c[p[a]];return f[d]||f._});return function(a,c){function p(d){throw Error("Syntax error: "+a.getPos(n.index)+(d?"\n"+d:""));}var u=0,l=[0],n=a.scan(),q=[],t={get:function(a){return q[q.length+a]},set:function(a,d){q[q.length+a]=d}};if(c)for(var m in c)t[m]=c[m];for(;;)if(m=e(u,E[n.tag]))if(0<m)l.push(u=m),q.push(n),n=a.scan();else if(0>
m&&-32768<m){m=-m;var u=d[m],r=u.length-1;l.length-=r;u=k[l[l.length-1]][u[0]-b];l.push(u);f[m]?(m=f[m].apply(t,q.splice(q.length-r,r)),q.push(m)):1!=r&&q.splice(q.length-r,r,null)}else return n.tag!=g[0]&&p(),q[0];else{m=[];for(r=0;r<b;++r)e(u,r)&&m.push(g[r]);p("find "+n.tag+"\nexpect "+m.join(" "))}}}(function(){function a(a,f,b,c,e,g,h){return["each",f,g,c&&eval(c.text),eval(b.text)]}function e(a){return["lit",eval(a.text)]}function b(a,f,b){return[f.text,a,b]}for(var g="$ ! % && ( ) * + - . / < <= = > >= [ ] boolean eq include ne number rawtext realId set string text {{ {{#each {{#if {{#raw}} {{/each}} {{/if}} {{/raw}} {{else}} {{{ || }} }}} AdditiveExpression EqualityExpression LogicalAndExpression LogicalOrExpression MemberExpression MultiplicativeExpression PrimaryExpression RelationalExpression UnaryExpression epsilon expr id program statement statements".split(" "),
c={},k=0;k<g.length;++k)c[g[k]]=k;return{nStart:40,tSymbols:g,tSymbolIndex:c,tAction:[{_:-2},{_:-32768},{27:3,28:4,29:5,30:6,31:7,36:8,_:-1},{_:-11},{1:10,4:11,8:12,18:13,20:14,22:15,24:16,25:17,26:18,_:0},{1:10,4:11,8:12,18:13,20:30,22:15,24:16,25:31,26:18,_:0},{23:34,_:0},{_:-3},{_:-19},{26:39,_:-16},{_:-18},{_:-14},{20:30,24:16,25:31,_:-15},{_:-17},{7:41,8:42,_:-35},{19:43,21:44,_:-43},{3:45,_:-45},{37:46,_:-47},{9:47,16:48,_:-25},{2:49,6:50,10:51,_:-32},{_:-22},{11:52,12:53,14:54,15:55,_:-40},
{_:-28},{38:56,_:0},{_:-20},{_:-16},{_:-15},{26:57,_:0},{38:58,_:0},{34:59,_:0},{39:60,_:0},{_:-26},{5:61,_:0},{_:-27},{38:62,_:0},{13:63,_:0},{20:30,24:16,25:31,_:0},{_:-9},{26:79,_:-48},{_:-13},{_:-10},{_:-21},{_:-12},{2:49,6:50,10:51,_:-33},{2:49,6:50,10:51,_:-34},{11:52,12:53,14:54,15:55,_:-41},{11:52,12:53,14:54,15:55,_:-42},{19:43,21:44,_:-44},{3:45,_:-46},{_:-23},{17:83,_:0},{_:-31},{_:-29},{_:-30},{7:41,8:42,_:-36},{7:41,8:42,_:-38},{7:41,8:42,_:-37},{7:41,8:42,_:-39},{38:84,_:0},{38:85,_:0},
{27:3,28:4,29:5,30:6,31:7,33:86,35:87,36:8,_:0},{38:88,_:0},{_:-24},{_:-4},{_:-8},{27:3,28:4,29:5,30:6,31:7,32:92,36:8,_:0},{27:3,28:4,29:5,30:6,31:7,32:93,36:8,_:0},{27:3,28:4,29:5,30:6,31:7,33:94,36:8,_:0},{_:-7},{_:-6},{_:-5}],actionIndex:[0,1,2,3,4,5,5,6,5,7,5,5,5,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,5,5,5,5,5,5,36,5,5,5,5,5,5,5,5,37,38,0,39,40,41,42,5,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,0,0,63,0,64,65,66,67,68,69,70],tGoto:[{12:1,
14:2},,{13:9},,{0:19,1:20,2:21,3:22,4:23,5:24,6:25,7:26,8:27,10:28,11:29},{0:19,1:20,2:21,3:22,4:23,5:24,6:25,7:26,8:27,10:32,11:29},{0:19,1:20,2:21,3:22,4:23,5:24,6:25,7:26,8:27,10:33,11:29},,{0:19,1:20,2:21,3:22,4:23,5:24,6:25,7:26,8:27,10:35,11:29},,{4:23,6:25,8:36,11:29},{0:19,1:20,2:21,3:22,4:23,5:24,6:25,7:26,8:27,10:37,11:29},{4:23,6:25,8:38,11:29},,,,,{11:40},,,,,,,,,,,,,,,,,,,,,,,,{4:23,5:64,6:25,8:27,11:29},{4:23,5:65,6:25,8:27,11:29},{0:19,4:23,5:24,6:25,7:66,8:27,11:29},{0:19,4:23,5:24,
6:25,7:67,8:27,11:29},{0:19,1:68,4:23,5:24,6:25,7:26,8:27,11:29},{0:19,1:20,2:69,4:23,5:24,6:25,7:26,8:27,11:29},{11:70},{0:19,1:20,2:21,3:22,4:23,5:24,6:25,7:26,8:27,10:71,11:29},{4:23,6:25,8:72,11:29},{4:23,6:25,8:73,11:29},{4:23,6:25,8:74,11:29},{0:75,4:23,5:24,6:25,8:27,11:29},{0:76,4:23,5:24,6:25,8:27,11:29},{0:77,4:23,5:24,6:25,8:27,11:29},{0:78,4:23,5:24,6:25,8:27,11:29},,{9:80},{14:81},,,,,{0:19,1:20,2:21,3:22,4:23,5:24,6:25,7:26,8:27,10:82,11:29},,,,,,,,,,,,,,,,,,{13:9},,,{14:89},{14:90},
,{14:91},,{13:9},{13:9},{13:9}],tRules:[[55,52],[52,54],[54],[54,54,53],[53,30,50,38,54,33],[53,30,50,38,54,35,54,33],[53,29,50,26,49,38,54,32],[53,29,50,26,26,38,54,32],[53,28,25,51,13,50,38],[53,28,50,38],[53,36,50,39],[53,27],[53,28,20,26,38],[53,31,23,34],[51,24],[51,25],[51,20],[46,26],[46,22],[46,18],[46,51],[46,4,50,5],[44,46],[44,44,9,51],[44,44,16,50,17],[48,44],[48,1,48],[48,8,48],[45,48],[45,45,6,48],[45,45,10,48],[45,45,2,48],[40,45],[40,40,7,45],[40,40,8,45],[47,40],[47,47,11,40],[47,
47,14,40],[47,47,12,40],[47,47,15,40],[41,47],[41,41,19,47],[41,41,21,47],[42,41],[42,42,3,41],[43,42],[43,43,37,42],[50,43],[49]],tFuncs:[,function(a){return["prog",a]},function(){return[]},function(a,f){a.push(f);return a},function(a,f,b,c,e){return["if",f,c]},function(a,b,c,e,g,k,h){return["if",b,e,k]},a,a,function(a,b,c,e,g,k){return["set",c.text,g]},function(a,b,c){return["eval",b,!0]},function(a,b,c){return["eval",b,!1]},function(a){return["text",a.text]},function(a,b,c,e){return["inc",eval(c.text)]},
function(a,b,c){return["raw",b.text]},,,,e,e,function(a){return["lit","true"==a.text]},function(a){return["id",a.text]},function(a,b,c){return b},,function(a,b,c){return[".",a,c.text]},function(a,b,c,e){return["[]",a,c]},,function(a,b){return["!",b]},function(a,b){return["u-",b]},,b,b,b,,b,b,,b,b,b,b,,function(a,b,c){return["eq",a,c]},function(a,b,c){return["ne",a,c]},,b,,b]}}())}();return{parse:F,compile:G,render:function(a,e){return G(a)(e)},version:"1.2.1"}}();"object"==typeof module&&module&&
"object"==typeof module.exports?module.exports=t:"function"==typeof define&&(define.amd||define.cmd)?define(function(){return t}):"undefined"!=typeof KISSY&&KISSY.add(function(){return t});v&&(v.Crox=t)})(this);
