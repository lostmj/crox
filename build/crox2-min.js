/*
 Crox v1.3.1
 https://github.com/thx/crox

 Released under the MIT license
 md5: 1e0f9b0f7a405f75d1c5e792e2357346
*/
KISSY.add("crox",function(){function w(b,a){this.row=b;this.col=a}function s(b,a){var d=b.substring(0,a),e=d.match(/\r\n?|\n/g),m=1;e&&(m+=e.length);d=1+/[^\r\n]*$/.exec(d)[0].length;return new w(m,d)}function z(b){return'"'+b.replace(/[\x00-\x1f"\\\u2028\u2029]/g,function(a){switch(a){case '"':return'\\"';case "\\":return"\\\\";case "\b":return"\\b";case "\f":return"\\f";case "\n":return"\\n";case "\r":return"\\r";case "\t":return"\\t"}return"\\u"+("000"+a.charCodeAt(0).toString(16)).slice(-4)})+
'"'}function A(b){return eval(b)}function B(b){function a(a,r,f,b){this.tag=a;this.text=r;this.index=f;this.subMatches=b}function d(){}function e(a){for(var r=1,f=[],b=[1],c=[],k=0;k<a.length;++k)b.push(r+=RegExp("|"+a[k][0].source).exec("").length),c.push(a[k][1]||d),f.push("("+a[k][0].source+")");return[RegExp(f.join("|")+"|","g"),b,c]}a.prototype.toString=function(){return this.text};var m=b.$||"$",g={},c;for(c in b)"$"!=c.charAt(0)&&(g[c]=e(b[c]));return function(n){var r=n.length,f=0,b=[""],
d={text:"",index:0,source:n,pushState:function(a){b.push(a)},popState:function(){b.pop()},retract:function(a){f-=a}};return{scan:function(){do{var k;a:{var c=g[b[b.length-1]],h=c[0];h.lastIndex=f;k=h.exec(n);if(""==k[0]){if(f<r)throw Error("lexer error: "+s(n,f)+"\n"+n.slice(f,f+50));k=new a(m,"",f)}else{d.index=f;f=h.lastIndex;for(var h=c[1],e=0;e<h.length;++e)if(k[h[e]]){c=c[2][e].apply(d,k.slice(h[e],h[e+1]));k=new a(c,k[0],d.index,k.slice(h[e]+1,h[e+1]));break a}k=void 0}}}while(null==k.tag);
return k},getPos:function(a){return s(n,a)}}}}function x(b,a,d,e,m){var g="";d=d?d.replace(/^_+/,"$&$&"):"_"+v++;if(/^\w+$/.test(b))var c=b;else c="_"+v++,g="var "+c+" = "+b+";";return g+("for(var "+d+(m?"=0;"+d+"<"+c+".length; ++"+d:" in "+c)+"){var "+e+" = "+c+"["+d+"];"+a+"}")}function y(b){v=0;return C(D(b))}w.prototype.toString=function(){return"("+this.row+","+this.col+")"};var D=function(){var b=[[/\s+/],[/\/\/[^\r\n]*|\/\*[\s\S]*?\*\//],[/[A-Za-z_]\w*/,function(a){switch(a){case "true":case "false":return"boolean";
case "set":case "include":return a;default:if(-1!=" abstract boolean break byte case catch char class const continue debugger default delete do double else enum export extends final finally float for function goto if implements import in instanceof int interface let long native new package private protected public return short static super switch synchronized this throw throws transient try typeof var void volatile while with yield ".indexOf(" "+a+" ")||"null"==a)throw Error("Reserved: "+a+" "+s(this.source,
this.index));return"realId"}}],[/"(?:[^"\\]|\\[\s\S])*"|'(?:[^'\\]|\\[\s\S])*'/,function(a){return"string"}],[/\d+(?:\.\d+)?(?:e-?\d+)?/,function(a){return"number"}],[function(a){a.sort().reverse();for(var b=0;b<a.length;++b)a[b]=a[b].replace(/[()*+?.[\]|]/g,"\\$&");return RegExp(a.join("|"))}("! % && ( ) * + - . / < <= = > >= [ ] || === !== == != ,".split(" ")),function(a){return/[*/%]/.test(a)?"mul":/[<>]/.test(a)?"rel":/[!=]=/.test(a)?"eq":a}]];return B({"":[[/(?:(?!{{)[\s\S])+/,function(a){return"text"}],
[/{{{/,function(a){this.pushState(a);return a}],[/{{(?:\/if|else|\/each|\/forin|\/raw)}}/,function(a){return a}],[/{{#raw}}/,function(a){this.pushState("raw");return a}],[/{{(?:#(?:if|each|forin)(?=\s))?/,function(a){this.pushState("{{");return a}]],raw:[[/(?:(?!{{\/raw}})[\s\S])+/,function(a){this.popState();return"rawtext"}]],"{{":b.concat([[/}}/,function(a){this.popState();return a}]]),"{{{":b.concat([[/}}}/,function(a){this.popState();return a}]])})}(),C=function(){return function(b){function a(a,
b){return c[a][b]}for(var d=b.nStart,e=b.tSymbols,m={},g=0;g<e.length;++g)m[e[g]]=g;var c=b.tAction,n=b.tGoto,r=b.tRules,f=b.tFuncs,u=b.actionIndex;u&&(a=function(a,b){var n=c[u[a]];return n[b]||n._});return function(b,c){function u(a){throw Error("Syntax error: "+b.getPos(t.index)+(a?"\n"+a:""));}var h=0,g=[0],t=b.scan(),p=[],s={get:function(a){return p[p.length+a]},set:function(a,b){p[p.length+a]=b}};if(c)for(var l in c)s[l]=c[l];for(;;)if(l=a(h,m[t.tag]))if(0<l)g.push(h=l),p.push(t),t=b.scan();
else if(0>l&&-32768<l){l=-l;var h=r[l],q=h.length-1;g.length-=q;h=n[g[g.length-1]][h[0]-d];g.push(h);f[l]?(l=f[l].apply(s,p.splice(p.length-q,q)),p.push(l)):1!=q&&p.splice(p.length-q,q,null)}else return t.tag!=e[0]&&u(),p[0];else{l=[];for(q=0;q<d;++q)a(h,q)&&l.push(e[q]);u("find "+t.tag+"\nexpect "+l.join(" "))}}}({nStart:37,tSymbols:"$ ! && ( ) + , - . = [ ] boolean eq include mul number rawtext realId rel set string text {{ {{#each {{#forin {{#if {{#raw}} {{/each}} {{/forin}} {{/if}} {{/raw}} {{else}} {{{ || }} }}} AdditiveExpression EqualityExpression LogicalAndExpression LogicalOrExpression MemberExpression MultiplicativeExpression PrimaryExpression RelationalExpression UnaryExpression _text args epsilon expr id name program statement statements texts".split(" "),
tAction:[{_:-2},{_:-32768},{22:3,23:4,24:5,25:6,26:7,27:8,33:9,_:-1},{_:-19},{1:13,3:14,7:15,12:16,14:17,16:18,18:19,20:20,21:21,_:0},{1:13,3:14,7:15,12:16,14:33,16:18,18:19,20:34,21:21,_:0},{17:38,_:0},{_:-17},{_:-3},{22:3,27:8,_:-13},{_:-26},{21:44,_:-23},{_:-25},{_:-21},{14:33,18:19,20:34,_:-22},{_:-24},{5:46,7:47,_:-44},{13:48,_:-48},{2:49,_:-50},{34:50,_:-52},{3:51,8:52,10:53,_:-36},{15:54,_:-41},{_:-29},{19:55,_:-46},{_:-39},{35:56,_:0},{_:-27},{_:-23},{_:-22},{14:33,18:19,20:34,21:57,_:0},
{35:61,_:0},{31:62,_:0},{36:63,_:0},{_:-18},{_:-37},{4:64,_:0},{_:-38},{35:65,_:0},{9:66,_:0},{1:13,3:14,7:15,12:16,14:33,16:18,18:19,20:34,21:21,_:-53},{14:33,18:19,20:34,_:0},{_:-11},{_:-15},{_:-16},{14:33,18:19,20:34,21:57,_:-53},{_:-20},{_:-12},{_:-28},{_:-14},{15:54,_:-42},{15:54,_:-43},{19:55,_:-47},{13:48,_:-49},{2:49,_:-51},{4:85,6:86,_:0},{4:87,_:0},{_:-34},{_:-30},{11:88,_:0},{_:-40},{5:46,7:47,_:-45},{35:89,_:0},{35:90,_:0},{35:91,_:0},{35:92,_:0},{22:3,23:4,24:5,25:6,26:7,27:8,30:93,32:94,
33:9,_:0},{35:95,_:0},{_:-33},{_:-32},{_:-31},{_:-4},{_:-10},{_:-35},{22:3,23:4,24:5,25:6,26:7,27:8,28:102,33:9,_:0},{22:3,23:4,24:5,25:6,26:7,27:8,28:103,33:9,_:0},{22:3,23:4,24:5,25:6,26:7,27:8,29:104,33:9,_:0},{22:3,23:4,24:5,25:6,26:7,27:8,29:105,33:9,_:0},{22:3,23:4,24:5,25:6,26:7,27:8,30:106,33:9,_:0},{_:-6},{_:-7},{_:-8},{_:-9},{_:-5}],actionIndex:[0,1,2,3,4,5,5,5,6,5,7,8,9,5,5,5,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,29,30,31,32,33,34,35,36,37,38,5,5,5,5,5,39,40,5,5,5,
41,42,43,44,44,0,45,46,47,48,5,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,5,68,69,0,0,0,0,70,0,71,72,73,74,75,76,77,78,79,80,81,82],tGoto:[{15:1,17:2},,{9:10,16:11,18:12},,{0:22,1:23,2:24,3:25,4:26,5:27,6:28,7:29,8:30,12:31,13:32},{0:22,1:23,2:24,3:25,4:26,5:27,6:28,7:29,8:30,12:35,13:32},{0:22,1:23,2:24,3:25,4:26,5:27,6:28,7:29,8:30,12:36,13:32},{0:22,1:23,2:24,3:25,4:26,5:27,6:28,7:29,8:30,12:37,13:32},,{0:22,1:23,2:24,3:25,4:26,5:27,6:28,7:29,8:30,12:39,13:32},,,{9:40},{4:26,6:28,
8:41,13:32},{0:22,1:23,2:24,3:25,4:26,5:27,6:28,7:29,8:30,12:42,13:32},{4:26,6:28,8:43,13:32},,,,,{13:45},,,,,,,,,,,,,,,{13:58,14:59},{13:58,14:60},,,,,,,,,,{4:26,5:67,6:28,8:30,13:32},{4:26,5:68,6:28,8:30,13:32},{0:22,4:26,5:27,6:28,7:69,8:30,13:32},{0:22,1:70,4:26,5:27,6:28,7:29,8:30,13:32},{0:22,1:23,2:71,4:26,5:27,6:28,7:29,8:30,13:32},{0:22,1:23,2:24,3:25,4:26,5:27,6:28,7:29,8:30,10:72,11:73,12:74,13:32},{13:75},{0:22,1:23,2:24,3:25,4:26,5:27,6:28,7:29,8:30,12:76,13:32},{4:26,6:28,8:77,13:32},
{0:78,4:26,5:27,6:28,8:30,13:32},,,,{11:79,13:58,14:80},{11:81,13:58,14:82},{17:83},,,,,{0:22,1:23,2:24,3:25,4:26,5:27,6:28,7:29,8:30,12:84,13:32},,,,,,,,,,,,,,,,,{9:10,16:11,18:12},,,{0:22,1:23,2:24,3:25,4:26,5:27,6:28,7:29,8:30,12:96,13:32},,,{17:97},{17:98},{17:99},{17:100},,{17:101},,,{9:10,16:11,18:12},{9:10,16:11,18:12},{9:10,16:11,18:12},{9:10,16:11,18:12},{9:10,16:11,18:12}],tRules:[[56,52],[52,54],[54],[54,54,53],[53,26,49,35,54,30],[53,26,49,35,54,32,54,30],[53,24,49,51,48,35,54,28],[53,
24,49,51,51,35,54,28],[53,25,49,51,48,35,54,29],[53,25,49,51,51,35,54,29],[53,23,20,50,9,49,35],[53,23,49,35],[53,33,49,36],[53,55],[53,23,14,21,35],[51,21],[51,50],[55,46],[55,55,46],[46,22],[46,27,17,31],[50,18],[50,20],[50,14],[43,21],[43,16],[43,12],[43,50],[43,3,49,4],[41,43],[41,41,8,50],[41,41,10,49,11],[41,41,3,48,4],[41,41,3,47,4],[47,49],[47,47,6,49],[45,41],[45,1,45],[45,7,45],[42,45],[42,42,15,45],[37,42],[37,37,5,42],[37,37,7,42],[44,37],[44,44,19,37],[38,44],[38,38,13,44],[39,38],[39,
39,2,38],[40,39],[40,40,34,39],[49,40],[48]],tFuncs:function(){function b(a,b){return a+b}function a(a,b,f,c,e,d,g){return x(b,d,c,f,!1)}function d(a,b,f,c,e,d,g){return x(b,d,c,f,!1)}function e(a){return a.text}function m(a){return a}function g(a,b,f,c){return a+"("+(f||"")+")"}function c(a,b,f){return a+b.text+f}return[,function(a){return Function("root","var _obj = { '<': '&lt;', '>': '&gt;', '&': '&amp;', '\"': '&quot;' };\tfunction _htmlEncode(s) {\t\treturn String(s).replace(/[<>&\"]/g, function(c) {\t\t\treturn _obj[c];\t\t});\t}var _t,_s = '';function _print(s,e){if(s!=null){if(e)s=_htmlEncode(s);_s+=s;}}"+
a+"return _s;")},function(){return""},b,function(a,b,f,c,d){return"if("+b+"){"+c+"}"},function(a,b,f,c,d,e,g){return"if("+b+"){"+c+"}else{"+e+"}"},a,a,d,d,function(a,b,f,c,d,e){return"var "+f.text.replace(/^_+/,"$&$&")+"="+d+";"},function(a,b,c){return"_print("+b+",1);"},function(a,b,c){return"_print("+b+");"},function(a){return"_print("+z(a)+");"},function(a,b,c,d){throw Error("unimplemented: include");},function(a){return A(a.text)},e,m,b,e,function(a,b,c){return b.text},,,,e,e,e,function(a){return a.text.replace(/^_+/,
"$&$&")},function(a,b,c){return"("+b+")"},,function(a,b,c){return a+"."+c},function(a,b,c,d){return a+"["+c+"]"},g,g,m,function(a,b,c){return a+","+c},,function(a,b){return"!"+b},function(a,b){return"- "+b},,c,,c,function(a,b,c){return a+"- "+c},,c,,c,,c,,c]}()})}(),v=0;return{compile:y,render:function(b,a){return y(b)(a)}}});
